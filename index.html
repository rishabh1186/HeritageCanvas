<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Heritage Canvas</title>

  <!-- Fonts + icons + Leaflet CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

  <style>
    /* ====== Reset & root ====== */
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap');
    :root{
      --sidebar-collapsed-width: 80px;
      --sidebar-expanded-width: 340px;
      --accent: #3498db;
      --bg: #ffffff;
      --glass: rgba(255,255,255,0.9);
      --shadow: 0 6px 20px rgba(0,0,0,0.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Poppins',sans-serif;overflow:hidden}

    /* ====== Layout ====== */
    .app { height:100vh; width:100vw; display:flex; background:#f3f6fa; }

    /* Sidebar (fixed on left) */
    .sidebar {
      position:fixed; left:0; top:0; bottom:0;
      width:var(--sidebar-collapsed-width);
      background:var(--bg);
      box-shadow: 4px 0 18px rgba(0,0,0,0.06);
      transition: width 360ms cubic-bezier(.2,.9,.2,1);
      z-index:1000;
      display:flex; flex-direction:column; align-items:center;
      padding:80px 12px 20px 12px; gap:14px;
    }
    .sidebar.expanded { width: var(--sidebar-expanded-width); align-items:flex-start; padding-left:22px; }

    /* map container */
    #map { height:100vh; width:100%; transition: margin-left 360ms cubic-bezier(.2,.9,.2,1); }

    /* Sidebar header / logo */
    .sidebar-header{ width:100%; padding:6px 0; margin-bottom:6px; }
    .logo { font-family:'Playfair Display',serif; font-size:1.6rem; background: linear-gradient(45deg, #2c3e50, var(--accent)); -webkit-background-clip:text; background-clip:text; color:transparent; white-space:nowrap; transition:opacity 200ms ease, transform 220ms ease; display:block; text-align:left; }
    .logo-short{ display:none; }
    .sidebar:not(.expanded) .logo{ display:none; }

    /* Details Sidebar */
    .details-sidebar { position: fixed; top: 0; right: -420px; width: 400px; height: 100vh; background: var(--bg); box-shadow: -4px 0 20px rgba(0,0,0,0.1); z-index: 1300; transition: right 400ms cubic-bezier(.2,.9,.2,1); overflow-y: auto; padding: 30px; font-family: 'Poppins', sans-serif; }
    .details-sidebar.open { right: 0; }
    .close-btn { position: absolute; top: 15px; right: 15px; background: #f0f4f8; border: none; width: 40px; height: 40px; border-radius: 50%; font-size: 24px; color: #555; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: transform 0.2s, background 0.2s; }
    .close-btn:hover { transform: rotate(90deg); background: #e74c3c; color: white; }
    .details-content #detailsImage { width: 100%; height: 200px; object-fit: cover; border-radius: 12px; margin-bottom: 20px; }
    .details-content #detailsName { font-family: 'Playfair Display', serif; font-size: 2rem; margin: 0 0 10px; }
    .details-content .details-meta { font-size: 0.9rem; color: #666; margin-bottom: 15px; font-weight: 600; }
    .details-content #detailsInfo { font-style: italic; color: #333; margin-bottom: 20px; border-left: 3px solid var(--accent); padding-left: 15px; }
    .details-content #detailsText { font-size: 1rem; line-height: 1.7; color: #444; }

    /* Filters container + buttons */
    .filters { width:100%; display:flex; flex-direction:column; gap:12px; padding-right:12px; box-sizing:border-box; }
    .filter-btn{ height:48px; border-radius:12px; border:0; background:#f0f4f8; color:#333; padding:0 14px; display:flex; align-items:center; gap:12px; cursor:pointer; font-weight:600; transition: transform 180ms ease, background 180ms ease; }
    .filter-btn i{ width:20px; text-align:center; }
    .filter-btn:hover{ transform: translateY(-3px); }
    .sidebar:not(.expanded) .filter-btn{ width:54px; justify-content:center; padding:0; }
    .sidebar:not(.expanded) .filter-btn .btn-text{ display:none; }
    .filter-btn.active{ background:var(--accent); color:#fff; }

    /* Top-left controls */
    .top-controls { position:fixed; left:18px; top:16px; z-index:1100; display:flex; gap:10px; align-items:center; pointer-events:auto; }
    .hamburger { width:52px;height:52px;border-radius:50%; background:var(--glass); display:flex; align-items:center; justify-content:center; box-shadow:var(--shadow); cursor:pointer; border:0; font-size:1.05rem; color:#333; transition: transform 360ms cubic-bezier(.2,.9,.2,1), background 220ms; }
    .hamburger:hover{ transform: scale(1.06) rotate(12deg); background:var(--accent); color:white; }
    .hamburger.open{ transform: rotate(180deg) scale(1.02); background:var(--accent); color:#fff; }
    #heritageIcon { width: 44px; height: 44px; border-radius: 8px; margin-left: 8px; box-shadow: 0 6px 20px rgba(0,0,0,0.08); transition: transform 300ms ease, opacity 300ms; cursor: pointer; }

    /* Timeline (bottom center) */
    .timeline { position: fixed; left: 50%; transform: translateX(-50%); bottom: 24px; z-index: 1100; width: 640px; display: flex; flex-direction: column; align-items: center; gap: 10px; pointer-events: auto; filter: drop-shadow(0 6px 18px rgba(0,0,0,0.08)); background: rgba(255, 255, 255, 0.95); border-radius: 12px; padding: 12px 20px; box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12); transition: background-color 0.3s ease; }
    .timeline:hover { background: rgba(255, 255, 255, 1); }
    .timeline input[type="range"] { width: 100%; -webkit-appearance: none; height: 12px; border-radius: 99px; background: linear-gradient(90deg, #8e44ad, var(--accent)); outline: none; box-shadow: 0 2px 8px rgba(142, 68, 173, 0.5); transition: box-shadow 0.3s ease; }
    .timeline input[type="range"]:hover { box-shadow: 0 4px 16px rgba(142, 68, 173, 0.8); }
    .timeline input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 28px; height: 28px; border-radius: 50%; background: #fff; border: 4px solid #fff; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.16); cursor: pointer; transition: transform 160ms ease, box-shadow 160ms ease; }
    .timeline input[type="range"]:hover::-webkit-slider-thumb { transform: scale(1.1); box-shadow: 0 8px 24px rgba(0, 0, 0, 0.24); }
    .timeline .year { font-weight: 700; color: #28343b; font-size: 1.1rem; user-select: none; transition: color 0.3s ease; }

    /* Custom zoom controls bottom-right */
    .custom-zoom { position: fixed; right: 22px; bottom: 40px; z-index: 1200; display: flex; flex-direction: column; gap: 12px; }
    .zoom-btn { width: 44px; height: 44px; border-radius: 50%; background: #3498db; border: none; color: white; display: flex; align-items: center; justify-content: center; font-size: 28px; cursor: pointer; transition: transform 0.3s ease, background-color 0.3s ease; user-select: none; }
    .zoom-btn:hover { background: #2c3e50; transform: scale(1.1); }
    .zoom-btn:active { transform: scale(0.95); }

    /* Hide Leaflet default zoom */
    .leaflet-control-zoom { display: none !important; }

    /* Legend (optional) */
    .legend { position: fixed; left: 22px; bottom: 26px; z-index: 1200; background: rgba(255, 255, 255, 0.95); padding: 8px 12px; border-radius: 10px; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08); font-size: 13px; color: #333; transition: background-color 0.3s ease; }
    .legend:hover { background: rgba(255, 255, 255, 1); }
    .legend .row { display: flex; gap: 8px; align-items: center; margin-bottom: 6px; }
    .legend .dot { width: 12px; height: 12px; border-radius: 50%; }

    /* responsive */
    @media (max-width:900px){ .timeline{ width:86%; left:50%; } .sidebar.expanded{ width: 84vw; } }

    /* Flashcard Styles */
    .flashcard-container {
      perspective: 1000px;
    }
    .flashcard {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
      cursor: pointer;
    }
    .flashcard.flipped {
      transform: rotateY(180deg);
    }
    .flashcard-front,
    .flashcard-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      border-radius: 0.75rem;
      box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1),
                  0 2px 4px -2px rgb(0 0 0 / 0.1);
      overflow: hidden;
    }
    .flashcard-back {
      transform: rotateY(180deg);
      background-color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 1.5rem;
    }
    /* Focus outline for keyboard navigation */
    .flashcard-container:focus {
      outline: none;
      box-shadow: 0 0 0 4px #fb923c;
      border-radius: 0.75rem;
    }

    /* Image area: ensure full image visibility */
    .image-wrap {
      height: 70%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #fff 0%, #fff7f0 100%);
    }
    .flashcard-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      object-position: center;
    }

    /* Carousel Layering & Animations */
    #flashcards-grid {
      position: relative;
      width: 100%;
      height: calc(100% * 16/9);
      max-height: 70vh;
    }
    .card-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      transition: transform 560ms cubic-bezier(0.18, 0.89, 0.32, 1.28),
                  opacity 420ms cubic-bezier(0.165, 0.84, 0.44, 1);
      will-change: transform, opacity;
      pointer-events: none;
    }
    .layer-0 {
      z-index: 30;
      transform: translateX(0) translateY(0) scale(1);
      opacity: 1;
      pointer-events: auto; /* only front card is interactive */
    }
    .layer-1 {
      z-index: 20;
      transform: translateX(24px) translateY(12px) scale(0.96);
      opacity: 0.95;
    }
    .layer-2 {
      z-index: 10;
      transform: translateX(48px) translateY(24px) scale(0.92);
      opacity: 0.9;
    }
    .leaving-left {
      transform: translateX(-80px) translateY(-6px) rotateZ(-2deg) scale(0.94);
      opacity: 0;
      z-index: 5;
    }
    .leaving-right {
      transform: translateX(80px) translateY(-6px) rotateZ(2deg) scale(0.94);
      opacity: 0;
      z-index: 5;
    }
    .enter-left {
      transform: translateX(-72px) translateY(0) rotateZ(-1.2deg) scale(0.96);
      opacity: 0.3;
    }
    .enter-right {
      transform: translateX(72px) translateY(0) rotateZ(1.2deg) scale(0.96);
      opacity: 0.3;
    }

    /* Respect reduced motion preferences */
    @media (prefers-reduced-motion: reduce) {
      .card-layer {
        transition: none;
      }
    }

    /* Flashcard content styles */
    .flashcard-content {
      display: none;
      flex-direction: column;
      height: 100%;
    }
    .flashcard-content.active {
      display: flex;
    }
    .flashcard-header {
      text-align: center;
      margin-bottom: 20px;
    }
    .flashcard-header h1 {
      font-size: 1.5rem;
      color: #3498db;
      margin: 0;
    }
    .flashcard-header p {
      color: #666;
      margin: 5px 0 0;
    }

    /* Search bar */
    .search-bar{ display:flex; align-items:center; gap:8px; width:100%; background:#fff; border-radius:999px; padding:10px 14px; border:1.5px solid #dbe9f7; box-shadow: 0 4px 14px rgba(0,0,0,0.06); }
    .search-bar i{ color:#666; }
    #searchInput{ flex:1; border:none; background:transparent; outline:none; font-size:0.95rem; color:#333; padding:4px 8px; }
    .clear-btn{ border:none; background:transparent; color:#888; cursor:pointer; width:32px; height:32px; border-radius:50%; display:flex; align-items:center; justify-content:center; }
    .clear-btn:hover{ color:#333; background:#e9eef3; }
    .sidebar:not(.expanded) .search-bar{ width:54px; justify-content:center; padding:10px; }
    .sidebar:not(.expanded) #searchInput, .sidebar:not(.expanded) .clear-btn{ display:none; }
      /* Special: Tales & Epics filter */
    @keyframes epicPulse { 0%{ box-shadow: 0 0 0 rgba(243,144,79,0.0);} 50%{ box-shadow: 0 0 10px rgba(243,144,79,0.55);} 100%{ box-shadow: 0 0 0 rgba(243,144,79,0.0);} }
    .epic-filter-btn{ background: linear-gradient(135deg,#ffb56b,#f3904f); color:#2c1e0f; border:2px solid rgba(255,255,255,0.8); box-shadow: 0 8px 24px rgba(243,144,79,0.35); position: relative; }
    .epic-filter-btn i{ color:#2c1e0f; }
    .epic-filter-btn:hover{ transform: translateY(-3px) scale(1.02); }
    .epic-filter-btn.active{ background: linear-gradient(135deg,#f7971e,#ffd200); color:#000; border-color: rgba(255,255,255,0.95); }
    .sidebar:not(.expanded) .epic-filter-btn{ background: linear-gradient(135deg,#ffb56b,#f3904f); }

    /* Epics submenu */
    .epic-subfilters { display:none; width:100%; gap:8px; padding-left:6px; }
    .epic-subfilters.open { display:flex; flex-direction:column; }
    .subfilter-btn{ height:36px; border-radius:10px; border:1px solid #f5c794; background:#fff2e3; color:#2c1e0f; padding:0 10px; display:flex; align-items:center; gap:8px; cursor:pointer; font-weight:600; font-size:0.9rem; transition: transform 150ms ease, background 150ms ease, border-color 150ms ease; }
    .subfilter-btn i{ width:16px; text-align:center; }
    .subfilter-btn:hover{ transform: translateY(-2px); background:#ffe5c5; border-color:#f2b56e; }
    .subfilter-btn.active{ background:#ffd9a8; color:#1c1209; border-color:#f2b56e; }
    .sidebar:not(.expanded) .epic-subfilters{ display:none !important; }
  </style>
</head>
<body>
  <div class="app">

    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <span class="logo-full">Heritage Canvas</span>
          <span class="logo-short">HC</span>
        </div>
      </div>

      <div class="search-bar" role="search">
        <i class="fas fa-search" aria-hidden="true"></i>
        <input id="searchInput" type="text" placeholder="Search places, info, details..." aria-label="Search" />
        <button id="clearSearch" class="clear-btn" title="Clear search" aria-label="Clear search"><i class="fas fa-times"></i></button>
      </div>

      <nav class="filters">
<button class="filter-btn active" data-theme="all" title="All"><i class="fas fa-globe-asia"></i><span class="btn-text">All</span></button>
        <button class="filter-btn epic-filter-btn" data-theme="tales_and_epics" title="Tales &amp; Epics"><i class="fas fa-book-open"></i><span class="btn-text">Tales &amp; Epics</span></button>
        <div id="epicSubfilters" class="epic-subfilters" aria-label="Tales &amp; Epics options">
  <button class="subfilter-btn" data-epic="ramayan" title="Ramayan"><i class="fas fa-scroll"></i><span class="btn-text">Ramayan</span></button>
  <button class="subfilter-btn" data-epic="harivamsa" title="Harivamsa"><i class="fas fa-om"></i><span class="btn-text">Harivamsa</span></button>
  <button class="subfilter-btn" data-epic="mahabharat" title="Mahabharat"><i class="fas fa-chess-knight"></i><span class="btn-text">Mahabharat</span></button>
</div>
        <button class="filter-btn" data-theme="monuments_and_architecture" title="Monuments &amp; Architecture"><i class="fas fa-landmark"></i><span class="btn-text">Monuments &amp; Architecture</span></button>
        <button class="filter-btn" data-theme="folk_arts_and_handcrafts" title="Folk arts &amp; Handicrafts"><i class="fas fa-palette"></i><span class="btn-text">Folk arts &amp; Handicrafts</span></button>
        <button class="filter-btn" data-theme="cuisine" title="Cuisine"><i class="fas fa-utensils"></i><span class="btn-text">Cuisine</span></button>
        <button class="filter-btn" data-theme="music_and_dance" title="Music &amp; Dance"><i class="fas fa-music"></i><span class="btn-text">Music &amp; Dance</span></button>
        <button class="filter-btn" data-theme="festivals_and_traditions" title="Festivals &amp; Traditions"><i class="fas fa-calendar-alt"></i><span class="btn-text">Festivals &amp; Traditions</span></button>
        <button class="filter-btn" data-theme="spiritual_and_pilgrimage" title="Spiritual &amp; Pilgrimage"><i class="fas fa-praying-hands"></i><span class="btn-text">Spiritual &amp; Pilgrimage</span></button>
        <button class="filter-btn" data-theme="nature_and_wildlife" title="Nature &amp; Wildlife"><i class="fas fa-leaf"></i><span class="btn-text">Nature &amp; Wildlife</span></button>
      </nav>
    </aside>

    <div id="map"></div>

    <div class="top-controls">
      <button class="hamburger" id="hamburger" aria-label="Toggle sidebar"><i class="fas fa-bars"></i></button>
    </div>

    <div class="timeline">
      <input id="yearRange" type="range" min="400" max="2025" value="2025" />
      <div class="year" id="yearLabel">2025</div>
    </div>

    <div class="custom-zoom">
      <button class="zoom-btn" id="zoomIn" title="Zoom in"><i class="fas fa-plus"></i></button>
      <button class="zoom-btn" id="zoomOut" title="Zoom out"><i class="fas fa-minus"></i></button>
    </div>

    <!-- Optional legend
    <div class="legend">
      <div class="row"><div class="dot" style="background:#e74c3c"></div>Monuments</div>
      <div class="row"><div class="dot" style="background:#8e44ad"></div>Arts</div>
      <div class="row"><div class="dot" style="background:#f39c12"></div>Dance</div>
      <div class="row"><div class="dot" style="background:#27ae60"></div>Cuisine</div>
    </div> -->
  </div>

  <div class="details-sidebar" id="detailsSidebar">
    <button class="close-btn" id="closeSidebarBtn">&times;</button>
    <div class="details-content" id="detailsContent">
      <img src="" alt="Location image" id="detailsImage">
      <h3 id="detailsName"></h3>
      <p class="details-meta">Year: <span id="detailsYear"></span></p>
      <p id="detailsInfo"></p>
      <p id="detailsText"></p>
    </div>
    <div class="flashcard-content" id="flashcardContent">
      <div class="flashcard-header">
        <h1>The Story of Ramayan â€” Flashcards</h1>
        <p>Click a card to flip it. Use Enter or Space for keyboard.</p>
      </div>
      <!-- Loading Indicator -->
      <div id="flashcardLoading" class="text-center">
        <div class="inline-flex items-center bg-white p-4 rounded-lg shadow-md">
          <svg class="animate-spin -ml-1 mr-3 h-6 w-6 text-orange-600"
               xmlns="http://www.w3.org/2000/svg" fill="none"
               viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10"
                    stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 
                     0 0 5.373 0 12h4zm2 5.291A7.962 
                     7.962 0 014 12H0c0 3.042 1.135 
                     5.824 3 7.938l3-2.647z"></path>
          </svg>
          <p class="text-lg font-semibold text-gray-700">Loading flashcards...</p>
        </div>
      </div>
      <!-- Flashcard Carousel -->
      <div id="flashcards-grid" class="max-w-2xl mx-auto hidden">
        <!-- Single flashcard will be dynamically inserted here -->
      </div>
      <!-- Navigation Controls -->
      <div id="flashcardNav" class="mt-6 flex items-center justify-center gap-6 hidden">
        <button id="flashcardPrev"
                class="inline-flex items-center justify-center rounded-full bg-white shadow-md text-orange-700 hover:bg-orange-100 focus:outline-none focus:ring-2 focus:ring-orange-400 w-11 h-11"
                aria-label="Previous card">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
        <span id="flashcardPosition" class="text-sm sm:text-base text-gray-700 font-medium">1 / 13</span>
        <button id="flashcardNext"
                class="inline-flex items-center justify-center rounded-full bg-white shadow-md text-orange-700 hover:bg-orange-100 focus:outline-none focus:ring-2 focus:ring-orange-400 w-11 h-11"
                aria-label="Next card">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="script.js"></script>
</body>
</html>




